import{a as t,j as d}from"./index-BBJX7inb.js";const r="hurry.sessionToken",c=t.createContext(null);function h(s){const[a,i]=t.useState(()=>{const e=localStorage.getItem(r);return e&&e.trim().length>0?e:null}),o=t.useRef(new Set),n=t.useCallback(()=>{localStorage.removeItem(r),i(null)},[]),u=t.useCallback(()=>{localStorage.getItem(r)&&(n(),o.current.forEach(e=>e()))},[n]),l=t.useCallback(e=>(o.current.add(e),()=>{o.current.delete(e)}),[]),S=t.useMemo(()=>({sessionToken:a,setSessionToken:e=>{if(e&&e.trim().length>0){localStorage.setItem(r,e),i(e);return}n()},handleUnauthorized:u,onSessionInvalidated:l}),[a,n,u,l]);return d.jsx(c.Provider,{value:S,children:s.children})}function f(){const s=t.useContext(c);if(!s)throw new Error("useSession must be used within SessionProvider");return s}export{h as S,f as u};
