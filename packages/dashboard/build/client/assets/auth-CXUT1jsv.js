import{a as r,j as t}from"./index-BBJX7inb.js";import{n as p,v as f}from"./chunk-WWGJGFF6-BoMxq1lg.js";import{B as o,a as j}from"./Button-B1BdtBaM.js";import{u as g}from"./session-BZ9GPMw7.js";import{C as k,a as v}from"./Card-CFtCxk2z.js";import{L as b,I as y}from"./Label-JIDdilb1.js";import{P as N}from"./PageLayout-DTESgE-z.js";import{u as C}from"./ToastProvider-C_5kRdyY.js";import{G as w}from"./github-BjK37amk.js";import{c as S}from"./createLucideIcon-BrAVhkf1.js";import{K as A}from"./key-round-BuME03QK.js";/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],P=S("arrow-right",I);function K(){const i=p(),n=f(),c=C(),{sessionToken:l,setSessionToken:d}=g(),[s,a]=r.useState(""),m=r.useMemo(()=>{const e=n.state??null;return(e==null?void 0:e.from)??"/"},[n.state]);function u(){const e=`${window.location.origin}/auth/callback`,h=j(`/api/v1/oauth/github/start?redirect_uri=${encodeURIComponent(e)}`);window.location.assign(h)}function x(){if(!s.trim()){c.push({kind:"error",title:"Session token required"});return}d(s.trim()),i(m)}return t.jsx(N,{title:"Authentication",subtitle:"Sign in to manage orgs, invitations, API keys, and bots.",actions:l?t.jsx("div",{className:"text-xs text-content-muted",children:"Session token stored locally"}):null,children:t.jsx(k,{children:t.jsx(v,{children:t.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[t.jsxs("div",{className:"rounded-2xl border border-border bg-surface-subtle p-5",children:[t.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-content-primary",children:[t.jsx(w,{className:"h-4 w-4 text-content-secondary"}),"Continue with GitHub"]}),t.jsx("div",{className:"mt-2 text-sm text-content-tertiary",children:"Uses GitHub OAuth. If OAuth isn't configured yet, use the session token option."}),t.jsx("div",{className:"mt-4",children:t.jsxs(o,{onClick:u,children:["Start OAuth",t.jsx(P,{className:"h-4 w-4"})]})})]}),t.jsxs("div",{className:"rounded-2xl border border-border bg-surface-subtle p-5",children:[t.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-content-primary",children:[t.jsx(A,{className:"h-4 w-4 text-accent-text"}),"Use a session token"]}),t.jsx("div",{className:"mt-2 text-sm text-content-tertiary",children:"Paste a session token."}),t.jsxs("div",{className:"mt-4 space-y-2",children:[t.jsx(b,{htmlFor:"token",children:"Session token"}),t.jsx(y,{id:"token",value:s,onChange:e=>a(e.target.value),placeholder:"Paste tokenâ€¦",autoComplete:"off",spellCheck:!1}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(o,{variant:"secondary",onClick:()=>a(""),children:"Clear"}),t.jsx(o,{onClick:x,children:"Save"})]}),t.jsx("div",{className:"text-xs text-content-muted",children:"Stored in `localStorage` only; never written to git."})]})]})]})})})})}export{K as default};
